<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Algorithmic Music Online</title>
    <meta name="author" content="Nick Briz">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="/images/favicon.png" />
    <!-- TODO: social media stuff -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/home.css">
  </head>
  <body>

    <main-menu>
      <div slot="menu-items">
        <div class="color-mode-wrap">
          <label class="color-mode-switch">
            <input type="checkbox">
            <span class="color-mode-slider"></span>
          </label>
          <span class="color-mode-label">light/dark mode</span>
        </div>
      </div>
    </main-menu>

    <div class="loader">
      <svg id="loader-wave" viewBox="0 0 100 100" preserveAspectRatio="none">
        <path d="" id="loader-wave-path"></path>
      </svg>
    </div>

    <main class="title-screen">
      <div class="formatted-text">
        <div>
          <span><span id="the-h">h</span>ttp<span id="the-s">s</span>://</span>
          <svg id="phasor"></svg>
        </div>
        <div>
          <span class="hidden-link randomize">algorithmic</span>
          <span class="hidden-link play">music</span>
        </div>
        <div>
          <div id="title-sheet-music" style="inline-block"></div>
          <span id="range-container"></span>
          <span>&nbsp;online</span>
        </div>
      </div>
    </main>

    <section id="introduction">
      <div class="content">
        <h2 class="formatted-text">Introduction</h2>

        <h3 class="formatted-text">course description</h3>

        <p>
          In this course, students will learn how to use JavaScript and web-based technologies to create algorithmic musical compositions and experimental web-based instruments. Through the use of the WebAudio API and JavaScript libraries like Tone.js, students will learn how to programmatically generate and manipulate sound, creating interactive and generative audio works that can be shared online.
        </p>
        <p>
          This will usually start with some example code I share on this site. Like the example below, this code will be interactive. Press the "play note" button to hear a sound, then change the number on line 6 below and press the "run code" button above the code to re-compile it. Then click the button again to hear the change in frequency.
        </p>
      </div>
    </section>

    <section id="editor"></section>

    <section class="table">
      <img src="images/run.svg" alt="run code">
      <p>← Press this button to re-run the code, this will take any changes you made and re-render the result to the right of the editor.</p>
      <img src="images/copy.svg" alt="copy code">
      <p>← Press this button to copy the full code (including any hidden code) to your clipboard. If you have an idea or a question you want to "discuss" (ie <i>process</i>) with an AI (like <a href="https://claude.ai/" target="_blank">Claude</a>, <a href="https://chatgpt.com/" target="_blank">ChatGPT</a> or <a href="https://phoenixai.uchicago.edu" target="_blank">PhoenixAI</a>) it helps to include the code in your "question" (ie <i>input</i>) refer to the AI Policy for more on this.</p>
      <img src="images/open-out.svg" alt="open code in netnet">
      <p>← Press this button to open the full code <a href="https://netnet.studio/" target="_blank">netnet</a>. This website is great for quick tests, but if you want to keep experimenting with an example you should work on it elsewhere. On netnet you can learn more about the code and spot errors, you can also "save" your progress by pressing <span class="hotkey" data-key="S"></span> and choosing to either download it, create a project (when u're logged into a <a href="https://github.com/" target="_blank">GitHub</a> account on netnet) or generate a quick URL you can use to share a sketch with me via email.</p>
      <img src="images/download.svg" alt="download code">
      <p>← Press this button to download the full code to your computer. While those of us newer to coding might prefer to work in netnet, others might already have a preferred code editor, programming environment and workflow. Those student can use this button to download the code in these examples to use as starting points for their own projects. Refer to the <a href="/assignments">assignments page</a> for more info on submitting assignments.</p>
    </section>

    <section>
      <div class="content">

        <p>
          This class is an intermediate level programming course. A beginner to intermediate level understanding of core programming concepts (ideally in JavaScript) is required. While a background in music can certainly be beneficial, it is not required for success in this course. Ultimately, this means you need to understand what code is, a special language that can be used to get the computer to do all the myriad things a computer can do. Like writing a recipe or casting a spell, the code we write are instructions for the “magic” we want the computer to generate. In our case, we’ll be writing in <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" target="_blank">JavaScript</a>, the defacto programming language of the Internet. If you’re familiar with other programming languages (like C++, Python, Java, etc) then you’re likely already familiar with all the core concepts and will just need to get used to JavaScript’s <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Grammar_and_types" target="_blank">syntax</a> and <a href="https://www.smashingmagazine.com/2023/12/making-sense-of-senseless-javascript-features/" target="_blank">eccentricities</a>. We’ll be reviewing these in week 1, but for a much deeper dive I highly recommend the book <a href="https://eloquentjavascript.net/" target="_blank">Eloquent Javascript</a> by Marijn Haverbeke (the entirety of which is available online for free).
        </p>

        <p>
          Of course, today we have generative AI, LLM-powered chatbots that can help us write and debug code (which we'll use), and on the software side we have DAWs (apps like Ableton or FL Studio) that let us shape sound without even having to code at all. Those tools are useful, but can undermine the point of this class, our goal isn't to create digital music the easist/quickest way possible, it's to to unlock the creative possibilities that come from understanding the computer as a creative medium itself. Music software limit us to the buttons and menus their designers imagined. By learning the fundamentals of sound/music programming, we open ourselves to a much larger range of creative possibilities: we gain the ability to design our own instruments, invent new ways of playing, and shape sound in ways no off-the-shelf program can. And while we'll be leveraging AI throughout this course (see AI Policy) this won't be about "vibe coding" our way to a result, but about developing the literacy to understand and mold code so our ideas can grow from it. The goal is not just to make music with a computer, but to explore what music can be when the computer itself becomes our medium.
        </p>

        <br><br><br>

      </div>

    </section>

    <section class="attribution">
      <div class="content">
        <p>
          <span style="font-weight: bold;">Attribution</span>: Text and code written by <a href="https://nickbriz.com/" target="_blank">Nick Briz</a>. The code editor icons designed by <a href="https://thenounproject.com/creator/MekoDa/" target="_blank">Meko</a> and licensed under Creative Commons Attribution License (CC BY 3.0). Sheet Music generated using <a href="https://www.abcjs.net/" target="_blank">ABC.js</a> by Paul Rosen and Gregory Dyke. All sounds generated using the Web Audio API and/or <a href="https://tonejs.github.io/" target="_blank">Tone.js</a> by Yotam Mann and <a href="https://github.com/Tonejs/Tone.js/graphs/contributors" target="_blank">other contributors</a>.
        </p>
      </div>
    </section>

    <!-- <section>
      <div class="content">
        <am-button>test</am-button>
        <am-switch>hello</am-switch>
      </div>
    </section> -->



    <script src="/js/libs/nn.min.js"></script>
    <script src="/js/libs/abcjs-basic-min.js"></script>
    <script src="/js/libs/d3@7.js"></script>
    <script src="/js/libs/Tone.js"></script>
    <script src="/js/libs/netitor.min.js"></script>

    <script src="/js/custom-elements/main-menu.js"></script>
    <script src="/js/custom-elements/algo-music-ui.js" data-theme="light"></script>

    <script src="/js/SVGSineWave.js"></script>
    <script src="/js/code-templates.js"></script>
    <script src="/js/utils.js"></script>
    <script>

      const moozak = window.utils.ranTitleMoozak()
      let lockToScale = false
      let autoReset = false

      const osc = new Tone.Oscillator().toDestination()

      const titleSine = new SVGSineWave({
        svg: '#phasor',
        circle: false,
        colors: ['var(--text-color)', 'var(--accent-color1)'],
        width: nn.width * 0.4
      })

      utils.createCodeEditor({
        ele: '#editor',
        code: {
          file: 'homepage-demo.js',
          template: ['body', 'tone', 'nn']
        }
      })

      utils.init()

      nn.getAll('.formatted-text').forEach(e => utils.formatText(e))

      function resize () {
        window.utils.resizeABC('#title-sheet-music > svg', nn.width * 0.75)
        titleSine.update({ width: nn.width * 0.45 })
      }

      function setupSlider () {
        const notes = ['C4', 'D4', 'E4', 'F4', 'G4', 'A4', 'B4', 'C5']
        const slider = nn.create('input')
          .addTo('#range-container')
          .set({ type: 'range', min: 1, max: 10, step: 0.1, value: 2 })
          .css({ position: 'absolute', transform: 'translate(-1.9vw, 2.3vw)' })
          .on('mousedown', () => osc.start())
          .on('mouseup', () => { osc.stop(); osc.volume.value = 0 })
          .on('mousemove', (e) => {
            const v = e.target.offsetTop - e.y
            const b = nn.height - e.target.offsetTop
            if (v >= 0) { osc.volume.value = 0 }
            else {
              osc.volume.value = nn.map(v, -b, 0, -100, 0)
              titleSine.amplitude = nn.map(v, -b, 0, 0, 1)
            }
          })
          .on('input', (e) => {
            const v = Number(e.target.value)
            if (lockToScale) {
              slider.set({ min: 0, max: notes.length - 1, step: 1 })
              titleSine.frequency = nn.map(v, 0, notes.length - 1, 1, 10)
              osc.frequency.value = notes[v]
              console.log(notes[v]);
            } else {
              slider.set({ min: 1, max: 10, step: 0.1 })
              titleSine.frequency = v
              osc.frequency.value = nn.map(v, 1, 10, 220, 880)
            }
          })
      }

      function setupIconColors () {
        const src = {
          'run code': '/images/run',
          'copy code': '/images/copy',
          'open code in netnet': '/images/open-out',
          'download code': '/images/download'
        }
        let t = ''
        if (window.localStorage.getItem('theme')  === 'dark') {
          t = '-white'
        }
        for (const alt in src) {
          nn.get(`[alt="${alt}"]`).src = `${src[alt]}${t}.svg`
        }
      }

      nn.get('.randomize').on('click', moozak.randomize)
      nn.get('.play').on('click', moozak.toggle)
      nn.on('keydown', (e) => {
        if (e.key === 'h') {
          // autoReset = !autoReset
          // if (lockToScale) nn.get('#the-h').css({ color: 'var(--accent-color1)'})
          // else nn.get('#the-h').css({ color: 'var(--text-color1)'})
        } else if (e.key === 's') {
          lockToScale = !lockToScale
          if (lockToScale) nn.get('#the-s').css({ color: 'var(--accent-color1)'})
          else nn.get('#the-s').css({ color: 'var(--text-color1)'})
        }
      })

      nn.on('load', resize)
      nn.on('load', setupSlider)
      nn.on('resize', resize)

      nn.get('.color-mode-switch input').on('input', setupIconColors)
      nn.on('load', setupIconColors)
    </script>
  </body>
</html>
