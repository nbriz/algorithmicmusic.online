// click the right side of this page (where the wave is) to "focus" it, and then press and hold any of the keys "a" through "k"
const wave = viz.createWaveform()
// the "PolySynth" allows us to play more than one note at a time
const synth = new Tone.PolySynth().toDestination()
synth.connect(wave)

// here we've created a map or dictionary which assigns an object { freq, pressed } to a series of letters representing keys on our key board
const keyMap = {
  a: { freq: 440, pressed: false },
  s: { freq: 493.88, pressed: false },
  d: { freq: 523.25, pressed: false },
  f: { freq: 587.33, pressed: false },
  g: { freq: 659.26, pressed: false },
  h: { freq: 698.46, pressed: false },
  j: { freq: 783.99, pressed: false },
  k: { freq: 880, pressed: false }
}

function attack (e) {
  // select the object from the keyMap matching the key pressed
  const obj = keyMap[e.key]
  // if we found an object and it is "not" pressed...
  if (obj && !obj.pressed) {
    //...then trigger the frequency
    synth.triggerAttack(obj.freq)
    obj.pressed = true
  }
}

// here we do the inverse of the function above
function release (e) {
	  const obj = keyMap[e.key]
  if (obj && obj.pressed) {
    synth.triggerRelease(obj.freq)
    obj.pressed = false
  }
}

// events listeners
nn.on('keydown', attack)
nn.on('keyup', release)
