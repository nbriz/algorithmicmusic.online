const wave = viz.createWaveform()
const osc = new Tone.Oscillator()
osc.set({
  frequency: 440,
  type: 'sine'
})
osc.toDestination()
osc.connect(wave)

function toggle (e) {
  const val = e.target.checked
  if (val === true) osc.start()
  else osc.stop()
}

// this function runs everytime the mouse moves
function changePitch (e) {
  // the mouse's horizontal position (e.x) is 0 when it's closest to the left of the screen and as it moves towards the right, the value increases to the number of pixels from the left of the screen. If your window is 1000px wide then the range of the mouse's horizontal movement would be 0-1000 which is not a great range for a frequency value, so we'll "map" that range to something a bit more ideal for pitch
  const val = nn.map(e.x, 0, nn.width, 220, 880)
  osc.set({ frequency: val })
}

// we can listen to mouse movements this way
nn.on('mousemove', changePitch)

nn.create('input')
  .set({ type: 'checkbox' })
  .addTo('body')
  .on('change', toggle)

nn.create('label')
  .content('toggle on/off')
  .addTo('body')
