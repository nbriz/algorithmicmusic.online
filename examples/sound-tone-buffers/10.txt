The previous version is pretty straight forward and easy to logic through, but might create some "clipping" sounds, if we want to be a bit cleaner about it, we could replace our "scalar" formula with a new one for calculate the "period" of the wave, which is essentially it's length, how much time (or samples) it takes for one complete cycle of the wave to occur (before it repeats itself). Then we can use here we use a little <a href="https://en.wikipedia.org/wiki/Modular_arithmetic" target="_blank">modular arithmetic</a> (%) to convert our ever increasing "s" value into a series of repeating values from 0 to the length of our period. Then we check to see if that current value is less than half the period, if so we make our sample 1 otherwise we make it -1. The point here is not to suggest that this is a "better" way to do it but to demonstrate that there are always many different ways to calculate the same (or nearly similar) buffers.
