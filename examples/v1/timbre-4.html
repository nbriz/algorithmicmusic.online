<body></body>
<script src="https://unpkg.com/tone"></script>
<script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js"></script>
<!-- imported d3 and visualization functions -->
<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<script src="https://algorithmicmusic.online/js/create-spectrum.js"></script>
<script src="https://algorithmicmusic.online/js/create-waveform.js"></script>
<script>
/* global Tone, nn, d3, createWaveform, createSpectrum */

const wave = createWaveform() // create a new waveform

const spec = createSpectrum({ // create a new spectrum
  range: [20, 7050] // set the frequency range
})

const osc = new Tone.Oscillator()
osc.frequency.value = 440
osc.type = 'sine'
osc.toDestination()
osc.connect(wave) // connect oscillator to the wave visual
osc.connect(spec) // connect oscillator to the spectrum visual

function play () {
  osc.start()
  osc.stop('+0.5')
}

nn.create('button')
  .content('play tone')
  .addTo('body')
  .on('click', play)
</script>
